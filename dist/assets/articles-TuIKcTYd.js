import{r as o,j as e,L as u}from"./index-CS0tk83g.js";import{H as j,F as p}from"./header-rE3yZXZT.js";import{u as f}from"./articleStore-BMwXl5t7.js";import"./index-0YxgapvH.js";function w(){const{articles:c,fetchArticles:i,loading:t,error:l,hasMore:a}=f(),r=o.useRef();o.useEffect(()=>{i()},[]);const g=o.useCallback(s=>{t||(r.current&&r.current.disconnect(),r.current=new IntersectionObserver(n=>{n[0].isIntersecting&&a&&i()}),s&&r.current.observe(s))},[t,a]);return e.jsxs(e.Fragment,{children:[e.jsx(j,{}),e.jsx("section",{className:"bg-white dark:bg-gray-900 text-gray-800 dark:text-white px-4 md:px-16 py-10",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Latest Articles"}),l&&e.jsx("p",{className:"text-red-500",children:l}),e.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:c.map((s,n)=>{var d,x,m;const h=n===c.length-1;return e.jsxs(u,{ref:h?g:null,to:`/article/${s.slug}`,className:"bg-gray-100 dark:bg-gray-800 rounded-lg overflow-hidden hover:shadow-lg transition",children:[e.jsx("img",{src:s.image,alt:s.title,className:"w-full h-40 object-cover"}),e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsx("h2",{className:"text-lg font-semibold leading-tight",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[((d=s==null?void 0:s.author)==null?void 0:d.avatar)&&e.jsx("img",{src:s.author.avatar,alt:s.author.username,className:"w-6 h-6 rounded-full object-cover"}),e.jsx("span",{children:((x=s==null?void 0:s.author)==null?void 0:x.username)||"Timi"}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:new Date(s.date||s.createdAt).toLocaleDateString()})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:s.excerpt||((m=s.content)==null?void 0:m.slice(0,120))+"..."})]})]},s._id)})}),t&&e.jsx("p",{className:"text-center mt-6",children:"Loading more..."}),!a&&!t&&e.jsx("p",{className:"text-center mt-6 text-gray-500",children:"No more articles."})]})}),e.jsx(p,{})]})}export{w as default};
