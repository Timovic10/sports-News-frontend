import{r as c,a as C,j as e,A as g}from"./index-CS0tk83g.js";import{u as A}from"./articleStore-BMwXl5t7.js";import{e as p,f as T}from"./index-0YxgapvH.js";function F(){const{articles:b,fetchArticles:o,resetArticles:h}=A(),[j,i]=c.useState(!1),[u,d]=c.useState(null),[t,m]=c.useState({title:"",content:"",category:"Football",author:"",image:null,tags:"",isTrending:!1,isRecent:!1}),[f,x]=c.useState(!1);C(),c.useEffect(()=>{h(),o()},[]);const y=async a=>{if(confirm("Are you sure you want to delete this article?"))try{if(i(!0),d(null),!(await fetch(`${g}${a}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to delete article");h(),o()}catch(l){d(l.message)}finally{i(!1)}},r=a=>{const{name:s,value:l,type:n,checked:w,files:v}=a.target;m(n==="file"?{...t,[s]:v[0]}:{...t,[s]:n==="checkbox"?w:l})},N=async a=>{a.preventDefault();try{i(!0),d(null);const s=new FormData;for(const n in t)s.append(n,t[n]);if(!(await fetch(`${g}`,{method:"POST",credentials:"include",body:s})).ok)throw new Error("Failed to create article");m({title:"",content:"",category:"Football",author:"",image:null,tags:"",source:"",isTrending:!1,isRecent:!1}),h(),o(),x(!1)}catch(s){d(s.message)}finally{i(!1)}},k=Array.from(new Map(b.map(a=>[a._id,a])).values());return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold dark:text-white",children:"Articles"}),e.jsxs("button",{onClick:()=>x(!0),className:"bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700",children:[e.jsx(p,{className:"inline mr-2"})," New Article"]})]}),e.jsx("dialog",{open:f,className:"modal modal-open",children:e.jsx("div",{className:"modal-box bg-white dark:bg-gray-800",children:e.jsxs("form",{onSubmit:N,className:"space-y-4",encType:"multipart/form-data",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"Create New Article"}),e.jsx("input",{type:"text",name:"title",value:t.title,onChange:r,placeholder:"Title",required:!0,className:"w-full p-2 border rounded dark:bg-gray-900 dark:border-gray-700 dark:text-white"}),e.jsx("textarea",{name:"content",value:t.content,onChange:r,placeholder:"Content",required:!0,className:"w-full p-2 border rounded dark:bg-gray-900 dark:border-gray-700 dark:text-white"}),e.jsx("input",{type:"text",name:"author",value:t.author,onChange:r,placeholder:"Author ID",required:!0,className:"w-full p-2 border rounded dark:bg-gray-900 dark:border-gray-700 dark:text-white"}),e.jsx("input",{type:"file",name:"image",onChange:r,accept:"image/*",className:"w-full p-2 border rounded dark:bg-gray-900 dark:border-gray-700 dark:text-white"}),e.jsx("input",{type:"text",name:"tags",value:t.tags,onChange:r,placeholder:"Tags (comma-separated)",className:"w-full p-2 border rounded dark:bg-gray-900 dark:border-gray-700 dark:text-white"}),e.jsxs("select",{name:"category",value:t.category,onChange:r,className:"w-full p-2 border rounded dark:bg-gray-900 dark:border-gray-700 dark:text-white",children:[e.jsx("option",{children:"Football"}),e.jsx("option",{children:"Basketball"}),e.jsx("option",{children:"NFL"}),e.jsx("option",{children:"Tennis"}),e.jsx("option",{children:"Cycling"}),e.jsx("option",{children:"Other"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",name:"isTrending",checked:t.isTrending,onChange:r}),e.jsx("span",{className:"dark:text-white",children:"Trending"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",name:"isRecent",checked:t.isRecent,onChange:r}),e.jsx("span",{className:"dark:text-white",children:"Recent"})]}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:"btn bg-gray-300 dark:bg-gray-700 dark:text-white",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn bg-blue-600 text-white hover:bg-blue-700",children:[e.jsx(p,{className:"inline mr-2"})," Submit Article"]})]}),j&&e.jsx("p",{className:"text-gray-700 dark:text-white",children:"Processing..."}),u&&e.jsx("p",{className:"text-red-500",children:u})]})})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full table-auto border dark:border-gray-600",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700 text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Title"}),e.jsx("th",{className:"p-3",children:"Category"}),e.jsx("th",{className:"p-3",children:"Author"}),e.jsx("th",{className:"p-3",children:"Trending"}),e.jsx("th",{className:"p-3",children:"Recent"}),e.jsx("th",{className:"p-3",children:"Published"}),e.jsx("th",{className:"p-3",children:"Actions"})]})}),e.jsx("tbody",{className:"text-gray-700 dark:text-white",children:k.map(a=>{var s;return e.jsxs("tr",{className:"border-t dark:border-gray-600",children:[e.jsx("td",{className:"p-3",children:a.title}),e.jsx("td",{className:"p-3",children:a.category}),e.jsx("td",{className:"p-3",children:((s=a.author)==null?void 0:s.username)||"admin"}),e.jsx("td",{className:"p-3",children:a.isTrending?"Yes":"No"}),e.jsx("td",{className:"p-3",children:a.isRecent?"Yes":"No"}),e.jsx("td",{className:"p-3",children:new Date(a.publishedAt).toLocaleDateString()}),e.jsx("td",{className:"p-3",children:e.jsx("button",{onClick:()=>y(a._id),className:"text-red-500 hover:text-red-700",children:e.jsx(T,{})})})]},a._id)})})]})})]})}export{F as default};
